---
sidebar: sidebar 
permalink: task_check_template_compliance.html 
keywords: templates, resource templates, application templates, volume templates, drift, compliant 
summary: Cloud Manager では、「ドリフト」機能を使用してテンプレートを使用してリソースが作成されたときに使用されたパラメータ値を監視できます。ドリフトは、変更され、テンプレート設定に適合しなくなったリソースを識別します。 
---
= テンプレートのコンプライアンスについては、リソースを確認してください
:hardbreaks:
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Manager では、「ドリフト」機能を使用してテンプレートを使用してリソースが作成されたときに使用されたパラメータ値を監視できます。ドリフトは、変更され、テンプレート設定に適合しなくなったリソースを識別します。

この時点で、ドリフトはリソース内の変更されたパラメータを識別します。リソースを手動で調整して、テンプレートに準拠させる必要があります。



== ドリフトの仕組み

ドリフトは、次のような非準拠パラメータを識別します。

. テンプレートを作成するときに、ユーザーに変更をさせたくない特定のパラメーターのドリフトをオンにします。たとえば、テンプレートから作成されたすべてのボリュームに対して、「 default 」ポリシーを使用して Snapshot コピーの作成を要求できます。
+
image:screenshot_template_drift_on_param.png["テンプレート内の 1 つのパラメータでドリフトを有効にする方法を示すスクリーンショット。"]

. テンプレートのドリフトをオンにして、テンプレートを保存します。
+
image:screenshot_template_drift_on_template.png["テンプレートのドリフトを有効にする方法を示すスクリーンショット。"]

. ストレージ管理者は、テンプレートを実行してボリュームを作成します。
. ストレージ管理者がボリュームを編集し、 Snapshot コピーは無効にします。
. すべてのテンプレートでドリフトチェックを実行し、 AppTemplates サービスは Snapshot コピーテンプレートの設定とボリューム内の現在の設定を比較します。準拠していない値にはフラグが付けられ、間違った設定を修正できます。




== ドリフトダッシュボード

ドリフトダッシュボードには、テンプレートを使用して作成されたリソース（ボリュームなど）の総数、テンプレートに準拠している数、未準拠（ドリフト済み）の数、およびドリフトを使用して作成された数が表示されます。

image:screenshot_template_drift_dashboard.png["AppTemplates サービスのドリフトダッシュボードのスクリーンショット。"]

* 各列の上部にあるコントロールを使用して、結果を数値またはアルファベット順にソートできます。
* 。 image:screenshot_plus_icon.gif[""] テンプレート名、ドリフトポリシーとステータス、アクションタイプで結果をフィルタできます。例：
+
image:screenshot_template_filter_drift_status.png["フィルタウィジェットを使用してリソースのリストを絞り込む方法を示すスクリーンショット。"]

* 検索バーでは、特定のボリューム名またはテンプレート名を検索できます。
* 作業環境や Storage VM など、実際のリソース（またはボリューム）に関する詳細を確認するには、をクリックします image:screenshot_sync_status_icon.gif[""]。
+
image:screenshot_template_drift_vol_details.png["ドリフトダッシュボード内のボリュームの詳細を示すスクリーンショット。"]





== ドリフトダッシュボードにデータを入力します

ドリフトダッシュボードの値を入力する前に、テンプレートでドリフトチェックを実行する必要があります。

テンプレートダッシュボードから、すべてのテンプレートのドリフトチェックを実行できます。

image:screenshot_template_drift_for_all.png["すべてのテンプレートのドリフトチェックの実行方法を示すスクリーンショット。"]

ドリフトチェックは、テンプレートダッシュボードから 1 つのテンプレートに対して実行できます。

image:screenshot_template_drift_for_one.png["1 つのテンプレートに対してドリフトチェックを実行する方法を示すスクリーンショット。"]



== 非準拠リソースのドリフトレポートを作成します

1 つのリソースのドリフトレポートを表示したり、レポートを実行してすべてのリソースのレポートをダウンロードしたりできます。このレポートを使用すると、システム管理者にアクションを割り当てて、リソースをテンプレートに準拠させる変更を加えることができます。

ドリフトダッシュボードでリソースのドリフトアイコンをクリックすると、非準拠の各リソースのパラメータのリストが表示されます。

image:screenshot_template_drift_report_one_resource.png["単一リソースのドリフトレポートのスクリーンショット。"]

テンプレートから作成されたすべてのリソースのドリフトレポートを表示するには、をクリックします image:button_download.png[""] をクリックして .csv ファイルをダウンロードします。
